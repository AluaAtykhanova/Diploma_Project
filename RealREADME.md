project/
├── bot/                                    # Основной код Telegram-бота
│   ├── commands/                           # Обработчики команд
│   │   └── sessionCommands.js              # Обработчики команд `/start` и `/new`
│   ├── controllers/                        # Обработчики запросов в бд
│   │   └── warnings.js                     # Процессы связаные с предупржедениями и стоп-листом
│   ├── handlers/                           # Обработчики запросов
│   │   └── messageHandler.js               # Обработка текстовых сообщений
│   ├── middlewares/                        # Промежуточные слои
│   │   ├── detectThreatInRequest.js        # Анализ потенциальной опасности запросов
│   │   └── rateLimiter.js                  # Ограничение частоты запросов
│   ├── prompts/
│   │   ├── instructions.js                 # Строки инструкций для бота
│   │   └── resolutions.js                  # Резолюции
│   ├── queries/
│   │   └── userQuery.js                    # Запросы в бд касающиеся пользователя
│   ├── utils/                              # Утилитарные функции
│   │   ├── aiClient.js                     # Взаимодействие с OpenAI API
│   │   ├── logger.js                       # Логирование
│   ├── bot.js                              # Основной файл запуска бота
│   └── config.js                           # Конфигурация бота (токены, настройки)
├── storage/                                # Хранилище данных
│   └── logs/                               # Логи запросов и ошибок
│       ├── app                             # Основные логи работы
│       └── errors                          # Логи ошибок
├── .gitignore                              # Исключения для Git
├── package.json                            # Описание зависимостей Node.js
└── README.md                               # Основная документация проекта

### **Пошаговый план реализации проекта**  

#### **1. Структурирование анкеты для формирования запросов**
- **Название**: Создание анкеты для ввода запросов.  
- **Краткое описание**:  
  Разработать анкету с четко определенными полями для ввода данных пользователем, минимизируя возможность влияния на работу бота.  
  **Поля анкеты**:
  - Формат резолюции (ЭП, ЭПСЧ и т.д.).  
  - Тематика (Экономика, Политика и др.).  
  - Наличие инфослайда.  
  - Температура генерации текста (низкая/высокая креативность).  
  - Комментарии (с обязательной проверкой на злонамеренность).  
- **Технология**: Node.js, Telegraf, AI-модели (для анализа комментариев).  
- **Уровень сложности**: Средний.  

#### **1.2. Проверка комментариев на вредоносные установки**
- **Название**: Анализ комментариев на злонамеренные установки.  
- **Краткое описание**:  
  Настройте искусственный интеллект для анализа текста, чтобы распознавать:
  - Попытки перепрограммирования бота.  
  - Угрозы или команды, направленные на сбор данных других пользователей.  
- **Основной механизм**: Обучите ИИ на датасете с примерами безопасных и злонамеренных команд. Используйте модели обработки текста, например, Hugging Face.  
- **Уровень сложности**: Высокий.  

#### **3. Очередь для отправки сообщений и анализ логов**
- **Название**: Реализация очереди запросов.  
- **Краткое описание**:  
  Добавьте все пользовательские запросы в очередь. Лимитируйте частоту их выполнения. Параллельно анализируйте логи для выявления аномалий (DDoS-атаки, подозрительные действия).  
  Для анализа аномалий примените модели машинного обучения.  
- **Технология**: Node.js, ML-алгоритмы.  
- **Уровень сложности**: Средний.  

#### **4. Защита от фишинга**
- **Название**: Ограничение на использование ссылок.  
- **Краткое описание**:  
  Полностью запретите отправку ссылок ботом. При попытке переобучения или манипуляции бот возвращает сообщение о нарушении и предупреждает пользователя.  
- **Основной механизм**: Валидация запросов на наличие ссылок. Автоматический бан при многократных нарушениях.  
- **Технология**: Node.js, Telegraf.  
- **Уровень сложности**: Низкий.  

#### **5. Защита контекста сессий**
- **Название**: Сброс контекста по завершении запроса.  
- **Краткое описание**:  
  У каждого пользователя должен быть свой уникальный контекст. Контекст сбрасывается после обработки запроса, исключая накопление данных из предыдущих запросов.  
- **Основной механизм**:  
  - Связать контекст с идентификатором пользователя.  
  - Очистить данные после завершения запроса.  
- **Технология**: Node.js, Telegraf.  
- **Уровень сложности**: Средний.  

---

### **Уровень угроз и защита**
1. **Контекстные манипуляции**: Защита через раздельные сессии.  
2. **DDoS-атаки**: Очередь запросов и бан злоумышленников.  
3. **Фишинг**: Запрет ссылок.  
4. **Перепрограммирование бота**: Анализ комментариев и запрет опасных инструкций.  
5. **Конфиденциальность данных**: Проверка запросов на недопустимые действия, предупреждения и блокировки.  

#### Итог: Разделение задач на небольшие этапы позволяет четко контролировать процесс разработки, одновременно внедряя механизмы защиты.
